!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ffcp=e():t.ffcp=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o={LEFT:"left",RIGHT:"right",CENTER:"center",MIDDLE:"middle",TOP:"top",BOTTOM:"bottom"},h={NONE:"none",FILL:"fill",BEST_FILL:"best-fill",BEST_FIT:"best-fit",BEST_FIT_DOWN_ONLY:"best-fit-down"},r=function(){function t(e){i(this,t),this.options={scale:h.BEST_FILL,alignX:o.CENTER,alignY:o.CENTER,forceStyle:!0,target:document.body,autoResize:!0,rounding:"ceil",selectors:{container:".do-container",content:".do-content"}},Object.assign(this.options,e),this.elements=[],this._parse(),this.options.auto_resize&&window.addEventListener("resize",this.resizeAll.bind(this)),this.resizeAll()}return n(t,[{key:"resizeAll",value:function(t){var e=this;return[].forEach.call(this.elements,function(i,n){if(e.cachedElements[n]){var o=e.cachedElements[n];Object.assign(i.content,o.content),Object.assign(i.container,o.container),e.resize(i.container,i.content,t)}}),this}},{key:"resize",value:function(t,e,i){var n=[];if(t instanceof HTMLElement||n.push("wrong container parameter"),e instanceof HTMLElement||n.push("wrong content parameter"),n.length)return n.forEach(function(t){return console.warn(t)}),!1;t.cache?Object.assign(t,t.cache):t.cache={width:t.width,height:t.height},e.cache?e.cache.src===e.src?Object.assign(e,e.cache):!function(){var t=document.createElement("img");t.onload=function(){e.cache.src=t.src,e.cache.width=t.width,e.cache.height=t.height},t.src=e.src}():e.cache={width:e.width,height:e.height};var o={};if(i=i?i:{},o.containerWidth=i.containerWidth||t.getAttribute("data-width")||t.getAttribute("width")||t.offsetWidth,o.containerHeight=i.containerHeight||t.getAttribute("data-height")||t.getAttribute("height")||t.offsetHeight,o.contentWidth=i.contentWidth||e.getAttribute("data-width")||e.getAttribute("width")||e.offsetWidth,o.contentHeight=i.contentHeight||e.getAttribute("data-height")||e.getAttribute("height")||e.offsetHeight,o.scale=i.scale||e.getAttribute("data-scale"),o.rounding=i.rounding||e.getAttribute("data-rounding"),o.align={x:i.alignX||e.getAttribute("data-align-x"),y:i.alignY||e.getAttribute("data-align-y")},i.forceStyle){var h=window.getComputedStyle(t),r=window.getComputedStyle(e);"fixed"!==h.position&&"relative"!==h.position&&"absolute"!==h.position&&(t.style.position="relative"),"fixed"!==r.position&&"relative"!==r.position&&"absolute"!==r.position&&(e.style.position="absolute"),"hidden"!==h.overflow&&(t.style.overflow="hidden")}var a={};a.width=o.containerWidth,a.height=o.containerHeight;var c={};c.width=o.contentWidth,c.height=o.contentHeight;var s=this._innerFrameForSize(o.scale,o.align,c,a);return-1!==["ceil","floor","round"].indexOf(o.rounding)&&(s.width=Math[o.rounding].call(this,s.width),s.height=Math[o.rounding].call(this,s.height),s.x=Math[o.rounding].call(this,s.x),s.y=Math[o.rounding].call(this,s.y)),e.style.position="relative",e.style.top=s.y+"px",e.style.left=s.x+"px",e.style.width=s.width+"px",e.style.height=s.height+"px",e.style.maxWidth="none",e.style.margin=0,e.style.display="block",this}},{key:"_parse",value:function(){var t=this,e=this.options.target;this.elements=[],this.cachedElements=[];var i=e.querySelectorAll(this.options.selectors.container);[].forEach.call(i,function(e,i){var n=e.querySelector(t.options.selectors.content);n&&(t.elements.push({container:e,content:n}),n.style.display="none",function(e,i,n){i.onload=function(){i.style.display="block",t.cachedElements[n]={container:{width:e.width,height:e.height},content:{width:i.width,height:i.height}},t.resize(e,i)}}(e,n,i))})}},{key:"_innerFrameForSize",value:function(t,e,i,n){var r=void 0,a=void 0,c=void 0,s={x:0,y:0,width:n.width,height:n.height};if(t===h.FILL)return s;switch(r=n.width/i.width,a=n.height/i.height,t){case h.BEST_FIT_DOWN_ONLY:c=i.width>n.width||i.height>n.height?a>r?r:a:1;break;case h.BEST_FIT:c=a>r?r:a;break;case h.NONE:c=1;break;case h.BEST_FILL:default:c=r>a?r:a}switch(s.width=Math.round(i.width*c),s.height=Math.round(i.height*c),e.x){case o.LEFT:s.x=0;break;case o.RIGHT:s.x=n.width-s.width;break;case o.MIDDLE:case o.CENTER:s.x=(n.width-s.width)/2}switch(e.y){case o.TOP:s.y=0;break;case o.BOTTOM:s.y=n.height-s.height;break;case o.MIDDLE:case o.CENTER:s.y=(n.height-s.height)/2}return s}}]),t}();t.exports=r}])});
//# sourceMappingURL=ffcp.min.js.map
